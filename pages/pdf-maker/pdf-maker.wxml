<view class="container" style="{{pageStyleGlobal}}">
  <view class="header">
    <text class="title">图片转PDF工具</text>
  </view>
  
  <view class="content">
    <view class="image-list">
      <block wx:for="{{images}}" wx:key="index">
        <view class="image-item {{draggingIndex === index ? 'dragging' : ''}} {{draggingTarget === index ? 'target' : ''}}"
                      bindtouchstart="onTouchStart" 
                      bindtouchmove="onTouchMove" 
                      bindtouchend="onTouchEnd" 
                      data-index="{{index}}">
          <image src="{{item.path}}" mode="aspectFill" bindtap="previewImage" data-url="{{item.path}}" style="transform: rotate({{item.rotation}}deg);"></image>
          <view class="delete-btn" catchtap="deleteImage" data-index="{{index}}">×</view>
          <view class="rotate-btn" catchtap="rotateImage" data-index="{{index}}">↻</view>
        </view>
      </block>
      <view class="add-btn" bindtap="chooseImage" wx:if="{{images.length < 32}}">
        <text class="add-icon">+</text>
      </view>
    </view>
  </view>

  <view class="footer">
    <view class="options">
      <view class="option-item">
        <text>尽量合并图片到同一页</text>
        <switch checked="{{combineImages}}" bindchange="onCombineImagesChange" />
      </view>
      <view class="option-item">
        <text>页面边距 (mm)</text>
        <input type="number" value="{{margin}}" bindchange="onMarginChange" class="margin-input" />
      </view>
      <view class="option-item">
        <text>自定义文件名</text>
        <input type="text" value="{{customFilename}}" bindchange="onFilenameChange" class="filename-input" placeholder="不填则使用时间戳" />
      </view>
    </view>
    <button class="generate-btn" bindtap="generatePDF" disabled="{{images.length === 0}}">
      生成PDF
    </button>
  </view>
</view> 